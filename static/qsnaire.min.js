function getFullDateTime(e){return e=e||new Date,format("%04d-%02d-%02d %02d:%02d",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes())}function getFullDateTime1(e){return e=e||new Date,format("%04d-%02d-%02d %02d:%02d:%02d",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}function get_yyyy_mm_dd(e){return e=e||new Date,format("%04d-%02d-%02d",e.getFullYear(),e.getMonth()+1,e.getDate())}function ajaxErrorHandle(e,t,a){500==e.status?alert(e.status+" : "+a):e.responseText?alert(e.responseText):t&&alert(t)}var format=function(e){if("string"!=typeof e)throw{name:"FormatStringError",message:"NEED a Format String!"};if(!/^(%([%shjnb]|\d*d)|[^%])*$/.test(e))throw{name:"FormatStringError",message:js(e)+" not proper"};var t=1,a=arguments;return e.replace(/%([%shjnb]|(\d*)d)/g,function(e,n,s){if("%"===n)return"%";if(t>=a.length)return e;var o=a[t];if(t++,"s"===n)return""+o;if("h"===n)return htmlEscape(""+o);if("j"===n)return js(o);if("n"===n)return""+o;if("b"===n)return o?"true":"false";var i=""+o.toFixed(0);if(!s)return i;for(var r=s.length>1&&"0"==s.charAt(0)?"0":" ",l=parseInt(s,10);i.length<l;)i=r+i;return i})},formatJson=function(e,t){var a=null,n="",s=0;return t=t||{},t.newlineAfterColonIfBeforeBraceOrBracket=t.newlineAfterColonIfBeforeBraceOrBracket===!0,t.spaceAfterColon=t.spaceAfterColon!==!1,"string"!=typeof e?e=JSON.stringify(e):(e=JSON.parse(e),e=JSON.stringify(e)),a=/([\{\}])/g,e=e.replace(a,"\r\n$1\r\n"),a=/([\[\]])/g,e=e.replace(a,"\r\n$1\r\n"),a=/(\,)/g,e=e.replace(a,"$1\r\n"),a=/(\r\n\r\n)/g,e=e.replace(a,"\r\n"),a=/\r\n\,/g,e=e.replace(a,","),t.newlineAfterColonIfBeforeBraceOrBracket||(a=/\:\r\n\{/g,e=e.replace(a,":{"),a=/\:\r\n\[/g,e=e.replace(a,":[")),t.spaceAfterColon&&(a=/\:/g,e=e.replace(a,":")),jQuery.each(e.split("\r\n"),function(e,t){var a=0,o=0,i="";for(t.match(/\{$/)||t.match(/\[$/)?o=1:t.match(/\}/)||t.match(/\]/)?0!==s&&(s-=1):o=0,a=0;a<s;a++)i+="    ";n+=i+t+"\r\n",s+=o}),n.replace(/(^\s*)|(\s*$)/g,"")},initUniform=function(e){e?jQuery(e).each(function(){0==$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())}):handleUniform()},blockUI=function(e){"none"==jQuery("#loadingToast").css("display")&&(jQuery("#toastMsgLoading").html("正在提交"),jQuery("#loadingToast").fadeIn(100))},unblockUI=function(e){"none"!=jQuery("#loadingToast").css("display")&&jQuery("#loadingToast").fadeOut(100)},handleUniform=function(){if(jQuery().uniform){var e=$("input[type=checkbox]:not(.toggle), input[type=radio]:not(.toggle, .star)");e.size()>0&&e.each(function(){0==$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())})}},showToastMessage=function(e,t){"none"==jQuery("#toast").css("display")&&(jQuery("#toastMessage").html(e),jQuery("#toastError").css("display","block"),jQuery("#toastSuccess").css("display","none"),jQuery("#toast").fadeIn(100),setTimeout(function(){jQuery("#toast").fadeOut(50,t)},1e3))},showToastSuccess=function(e,t){"none"==jQuery("#toast").css("display")&&(jQuery("#toastMessage").html(e),jQuery("#toastError").css("display","none"),jQuery("#toastSuccess").css("display","block"),jQuery("#toast").fadeIn(100),setTimeout(function(){jQuery("#toast").fadeOut(50,t)},1e3))},showDialogMessage=function(e,t){jQuery("#dialogMessage").html(e),jQuery("#iosDialog2").fadeIn(200),jQuery("#iosDialog2 .weui-dialog__btn")[0].onclick=function(){jQuery(this).parents(".js_dialog").fadeOut(200,t)}},showConfirmMessage=function(e,t,a){jQuery("#confirmTitle").html(e),jQuery("#confirmMessage").html(t),jQuery("#iosDialog1").fadeIn(200),jQuery("#iosDialog1 .weui-dialog__btn_primary")[0].onclick=function(){jQuery(this).parents(".js_dialog").fadeOut(200,a)},jQuery("#iosDialog1").on("click",".weui-dialog__btn_default",function(){jQuery(this).parents(".js_dialog").fadeOut(200)})},reloadAllItems=function(e,t,a){jQuery(e).html(""),jQuery.each(t,function(t,n){var s="";"T"!=n.QI_TYPE&&jQuery.each(n.QI_OPTION,function(e,a){if("R"==n.QI_TYPE||"RA"==n.QI_TYPE)s+="R"==n.QI_TYPE?'<label class="radio"><input type="radio" id="ask'+t+"_op"+e+'" name="ask'+t+'" value="'+e+'" />'+a+"</label>":'<button class="btn" id="ask'+t+"_op"+(e+1)+'" name="ask'+t+'" onclick="clickRadio('+t+","+(e+1)+');">'+a+"</button>&nbsp;";else if("C"==n.QI_TYPE||"CH"==n.QI_TYPE)s+="C"==n.QI_TYPE?'<label class="checkbox"><input type="checkbox" id="ask'+t+"_op"+e+'" name="ask'+t+'" value="'+e+'" />'+a+"</label>":'<button class="btn" id="ask'+t+"_op"+(e+1)+'" name="ask'+t+'" onclick="clickCheck('+t+","+(e+1)+');">'+a+"</button>&nbsp;";else if("S"==n.QI_TYPE)s+='<button class="btn" id="ask'+t+"_op"+(e+1)+'" name="ask'+t+'" onclick="clickStar('+t+","+(e+1)+');">'+(e+1)+"</button>&nbsp;";else if("B"==n.QI_TYPE){var o=0==e?"是":1==e?"否":"不确定";s+='<button class="btn" id="ask'+t+"_op"+(e+1)+'" name="ask'+t+'" onclick="clickBoolean('+t+","+(e+1)+');">'+o+"</button>&nbsp;"}else s+='<label class="radio"><input type="radio" id="ask'+t+"_op"+e+'" name="ask'+t+'" value="'+e+'" />'+a+"</label>"});var o="";"T"==n.QI_TYPE?(s+='<div class="weui-cells" style="margin-top:0px"><div class="weui-cell"><div class="weui-cell__bd"><input type="text" autocomplete="off" class="weui-input" id="ask'+t+'" name="ask'+t+'" placeholder="请输入答案" onfocus="itemTGetFocus(this);" /></div></div></div>',o='<div class="accordion-inner" style="padding:0px">'+s+"</div>"):o='<div class="accordion-inner">'+s+"</div>";var i="";if(a)var i='<div class="btn-group edit">                            <a class="btn" href="#" data-toggle="dropdown"><i class="icon-reorder"></i></a>                            <ul class="dropdown-menu" style="left:-122px;">                                <li><a href="javascript:clickEditAsk('+t+');"><i class="icon-pencil"></i> 编辑</a></li>                                <li><a href="javascript:clickDelAsk('+t+');"><i class="icon-trash"></i> 删除</a></li>                                <li><a href="javascript:clickMoveAsk('+t+');"><i class="icon-retweet"></i> 移动</a></li>                            </ul>                        </div>';console.log(a),jQuery(e).append('            <div class="accordion-group">                <div class="accordion-heading">                    <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion1" href="#collapse_'+t+'" id="a_ask_'+t+'" style="padding-right:'+(a?"40":"15")+'px;">                    <i class="icon-question-sign"></i> '+(t+1)+"."+n.QI_TITLE+("CH"==n.QI_TYPE?"(多选)":"RA"==n.QI_TYPE?"(单选)":"")+"                    </a>"+i+'                </div>                <div id="collapse_'+t+'" class="accordion-body collapse in">'+o+"</div>            </div>"),"T"==n.QI_TYPE&&jQuery("#collapse_"+t).on("shown.bs.collapse",function(){document.activeElement.id!="ask"+t&&jQuery("#ask"+t).focus()})}),initUniform()},itemTGetFocus=function(e){jQuery(e).parent().parent().parent().parent().parent().attr("class")};